{"version":3,"sources":["components/Home/List.module.scss","utils.ts","components/Home/ListItem.tsx","components/Home/List.tsx","api/ArticlesAPI.ts","components/Home/index.tsx","api/APIUtils.ts","api/AuthAPI.ts","reducers/auth.tsx","context/auth.tsx","components/common/ListErrors.tsx","components/Register.tsx","components/Login.tsx","components/common/FollowUserButton.tsx","api/ProfileAPI.ts","components/Profile.tsx","components/Settings.tsx","components/PrivateRoute.tsx","routes/Routes.tsx","components/App.tsx","index.tsx","components/Home/ListItem.module.scss"],"names":["module","exports","listContainer","searchContainer","cur","searchTop","left","right","ALT_IMAGE_URL","CLOUD_URL_PREFIX","ListItem","_ref","article","style","newestType","React","useEffect","hasImg","imgLinks","length","colors","noImgStyle","styles","noImg","showPublishTime","react_default","a","createElement","className","concat","listItem","href","link","card","imgContainer","src","width","height","imgRate","textContainer","dataContainer","title","isEliteArticle","frontContent","author","authorPic","dataItem","contentLength","text","responseCount","likeCount","keyWordContainer","keyWords","join","map","keyWord","keyIndex","es_tag","key","tag","color","publishTimeContainer","publishTime","lastResponse","List","getCurClientWidth","Math","floor","document","body","clientWidth","_React$useState","useState","_React$useState2","Object","slicedToArray","list","setList","_React$useState3","_React$useState4","setClientWidth","autoResponsiveProps","itemMargin","itemClassName","transitionDuration","gridWidth","transitionTimingFunction","containerWidth","eventName","handler","element","arguments","undefined","window","saveHandler","current","event","addEventListener","eventListener","removeEventListener","useEventListener","Select","Option","_React$useState5","_React$useState6","setNewestType","changeNewest","type","sortByPublish","arr","deepClone","sort","b","Date","getTime","sortByComment","effectiveList","categoryArrMap","id","name","place","hobby","work","condition","_React$useState7","_React$useState8","category","setCategory","_React$useState9","_React$useState10","_React$useState11","_React$useState12","_React$useState13","_React$useState14","_React$useState15","_React$useState16","_React$useState17","_React$useState18","_React$useState19","_React$useState20","_React$useState21","_React$useState22","secondSearch","Promise","resolve","reject","axios","get","then","res","data","error","console","log","filter","item","filterEffectiveDat","homeList","back_top","newestObj","index","onClick","divider","searchCategory","categoryObj","dist_default","itemWidth","bottomHeight","ceil","itemHeight","Home","_","TOKEN_KEY","setToken","token","defaults","headers","common","baseURL","interceptors","response","use","status","navigate","handleUserResponse","value","_ref$user","user","objectWithoutProperties","localStorage","setItem","JSON","stringify","login","email","password","API","post","logout","removeItem","initialState","isAuthenticated","authReducer","state","action","objectSpread","AuthContext","createContext","dispatch","AuthProvider","props","_React$useReducer","useReducer","_React$useReducer2","getItem","parse","getLocalStorageValue","decoded_jwt","jwtDecode","current_time","now","valueOf","exp","isTokenValid","Provider","assign","useAuth","useContext","ListErrors","errors","entries","_ref2","_ref3","Register","username","form","setForm","loading","setLoading","setErrors","_useAuth","handleChange","defineProperty","currentTarget","handleSubmit","asyncToGenerator","regenerator_default","mark","_callee","_user","wrap","_context","prev","next","preventDefault","sent","t0","stop","_x","apply","this","es","to","noThrow","onSubmit","placeholder","onChange","disabled","Login","setEmail","setPassword","target","FollowUserButton","profile","classNames","following","push","followProfile","getProfile","Profile","_ref$username","setProfile","ignore","_fetchProfile","payload","fetchProfile","handleClick","_callee2","_context2","abrupt","delete","isUser","image","alt","bio","EditProfileSettings","Settings","put","rows","PrivateRoute","Comp","as","Routes","Fragment","from","default","path","App","_useAuth$state","_fetchUser","_payload$data$user","fetchUser","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.17bfe4a1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"listContainer\":\"List_listContainer__7Vk_n\",\"searchContainer\":\"List_searchContainer__1Tzoa\",\"cur\":\"List_cur__2IY9y\",\"searchTop\":\"List_searchTop__2U5OW\",\"left\":\"List_left__2_NIi\",\"right\":\"List_right__3QW3j\"};","import React from 'react';\nexport const APP_NAME = 'doubanbf';\nexport const ALT_IMAGE_URL =\n  'https://douban-1300076408.cos.ap-guangzhou.myqcloud.com/alt.png';\nexport const CLOUD_URL_PREFIX = 'https://douban-1300076408.cos.ap-guangzhou.myqcloud.com';\nexport const CLOUD_IMG_PREFIX = 'https://douban-1300076408.cos.ap-guangzhou.myqcloud.com/alt.png/assets/';\nexport function getLocalStorageValue(key: string) {\n  const value = localStorage.getItem(key);\n  if (!value) return null;\n  try {\n    return JSON.parse(value);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function setLocalStorage(key: string, value: string) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\n// 下面使我们编写的自定义 hook\nexport function useEventListener(eventName: string, handler: (event: any) => void, element = window) {\n  // 创建一个 ref 来存储处理程序\n  let saveHandler = { current: (event: any) => { } };\n\n  // 如果 handler 变化了，就更新 ref.current 的值。\n  // 这个让我们下面的 effect 永远获取到最新的 handler\n  React.useEffect(() => {\n    saveHandler.current = handler;\n  }, [handler]);\n\n  React.useEffect(\n    () => {\n      // 确保元素支持 addEventListener\n      const isSupported = element && element.addEventListener;\n      if (!isSupported) return;\n\n      // 创建事件监听调用存储在 ref 的处理方法\n      const eventListener = (event: any) => saveHandler.current(event);\n\n      // 添加事件监听\n      element.addEventListener(eventName, eventListener);\n\n      // 清除的时候移除事件监听\n      return () => {\n        element.removeEventListener(eventName, eventListener);\n      };\n    },\n    [eventName, element] // 如果 eventName 或 element 变化，就再次运行\n  );\n};\n\nexport const placeArr = [\n  '深圳',\n  '广州',\n  '上海',\n  '北京',\n  '杭州',\n  '安徽',\n  '重庆',\n  '成都',\n  '武汉',\n  '新疆',\n  '汕头',\n  '朝阳',\n  '佛山',\n  '南京',\n  '山东',\n  '魔都',\n  '海南',\n  '长沙',\n  '南宁',\n  '福州',\n  '福建',\n  '哈尔滨',\n  '海南',\n  '西安',\n  '厦门',\n  '东北',\n  '浙江',\n  '天津',\n  '潮汕',\n  '湖南',\n  '湖北',\n  '云南',\n  '昆明',\n  '大理',\n  '宁波',\n  '湖北',\n  '四川',\n];\nlet findFriendWords = [\n  '征友',\n  '交友',\n  '找BF',\n  '找男朋友',\n  '找男友',\n  '找个男友',\n  '找个男朋友',\n  '蒸男友',\n  '蒸个男友',\n  '找对象',\n  '征bf',\n  '脱单',\n  '找朋友',\n  '单身',\n];\n\nlet aidsWords = [\n  '阻断',\n  '高危',\n  'AIDS',\n  '阳性',\n  '感染',\n];\nlet depressionWords = [\n  '抑郁',\n  '失眠',\n  '焦虑',\n];\n\nlet specialLikeWords = [\n  '天体',\n  'SM',\n  '牛农',\n];\nlet workWords = [\n  '电商',\n  '读研',\n  '银行',\n  '老师',\n  '金融',\n  '国企',\n  '公务员',\n  '程序员',\n  '互联网',\n  '学生',\n  '酒店',\n  '地产',\n  '药企',\n  '机械',\n  '管理',\n  '行业',\n  'HR',\n  '军人',\n];\n\nlet hobbyWords = [\n  '宝可梦',\n  '王者',\n  '健身',\n  '撸铁',\n  '音乐',\n  '电影',\n  '摄像',\n  '拍摄',\n  '羽毛球',\n  '游戏',\n  '猫',\n  '狗',\n  '打游戏',\n  '旅游',\n  '旅行',\n  '阅读',\n  '汉服',\n  '读书',\n  '话剧',\n  '游泳',\n  '爬山',\n  '徒步',\n  '跑步',\n  '马拉松',\n\n];\nlet otherWorks = [\n  '硕士',\n  '博士',\n  '形婚',\n  '出柜',\n  '不婚',\n  '催婚',\n  '代孕',\n  '形婚',\n  '理工',\n  '考研',\n  '海归',\n  '合租',\n  '整租',\n  '租房',\n  '三十',\n  '90',\n  '80',\n  '有房',\n  '已婚',\n  '结婚',\n  '稳定',\n  '大叔',\n  '肌肉',\n  '做饭',\n  '直女',\n  'GAY蜜',\n  '双性恋',\n  '闺蜜',\n  '经济独立',\n  '开放式',\n  '中年',\n  '拉拉',\n  '泰国',\n  '春节',\n  '安利',\n  '资源',\n  '过年'\n];\n","import React from 'react';\nimport styles from './ListItem.module.scss';\nimport { IArticle } from '../../types';\nimport { ALT_IMAGE_URL } from '../../utils';\nimport { Tag } from 'antd';\ntype ListItemProps = {\n  article: IArticle,\n  newestType: string,\n  style: any\n};\n\nexport default function ListItem({\n  article,\n  style,\n  newestType\n}: ListItemProps) {\n\n  React.useEffect(() => {\n  }, []);\n  const hasImg = article.imgLinks && article.imgLinks.length;\n  const colors = ['volcano', 'blue', 'cyan', 'gold', 'geekblue', 'magenta', 'lime', 'red'];\n  const noImgStyle = hasImg ? '' : styles.noImg;\n  const showPublishTime = (newestType === 'publish');\n\n  return (\n    <div className={`${styles.listItem} ${noImgStyle}`} style={style}>\n      <a href={article.link} className={styles.card}>\n        {\n          hasImg ? <div className={styles.imgContainer}>\n            <img src={`${article.imgLinks[0]}`} width={style.width} height={style.width * article.imgRate} />\n          </div> : ''\n        }\n        <div className={styles.textContainer}>\n          <div className={styles.dataContainer}>\n            <span title={article.isEliteArticle ? `精华帖 - ${article.title}` : article.title}>\n              <span className={styles.title}>{article.isEliteArticle ? <i className='icon-heart'>精</i> : ''}{`${article.title}`}</span>\n            </span>\n          </div>\n          <div className={styles.dataContainer}>\n            <span title={`内容：${article.frontContent}`}>\n              <span className={styles.frontContent}>{article.frontContent}</span>\n            </span>\n          </div>\n          <div className={styles.dataContainer}>\n            <span title={`作者：${article.author}`}>\n              <img className={styles.authorPic} src={article.authorPic} />\n              <span className={styles.author}>{article.author}</span>\n            </span>\n          </div>\n          <div className={styles.dataContainer}>\n            <span className={styles.dataItem} title={`文章内容长度：${article.contentLength}`}>\n              <i className={`icon-contentLength`}></i>\n              <span className={styles.text}>文长{article.contentLength}</span>\n            </span>\n            <span className={styles.dataItem} title={`照片数量：${hasImg ? article.imgLinks.length : 0}`}>\n              <i className={`icon-photo`}></i>\n              <span className={styles.text}>照片{hasImg ? article.imgLinks.length : 0}</span>\n            </span>\n          </div>\n          <div className={styles.dataContainer}>\n            <span className={styles.dataItem} title={`评论数：${article.responseCount}`}>\n              <i className={`icon-response2`}></i>\n              <span className={styles.text}>评论{article.responseCount}</span>\n            </span>\n            <span className={styles.dataItem} title={`点赞数：${article.likeCount}`}>\n              <i className={`icon-like`}></i>\n              <span className={styles.text}>点赞{article.likeCount}</span>\n            </span>\n          </div>\n          <div className={styles.dataContainer}>\n            <span className={styles.keyWordContainer} title={`关键词：${article.keyWords.join('，')}`}>\n              {\n                article.keyWords.map((keyWord, keyIndex) => {\n                  return <Tag key={keyIndex} className={styles.tag} color={colors[keyIndex % 8]}>{keyWord}</Tag>\n                })\n              }\n            </span>\n          </div>\n          <div className={`${styles.dataContainer} ${styles.publishTimeContainer}`}>\n            <span >\n              <i className={`icon-time`}></i>\n              <span className={styles.publishTime}>{showPublishTime ? article.publishTime : article.lastResponse}</span>\n            </span>\n\n          </div>\n        </div>\n      </a >\n    </div >\n  );\n}\n\n","import React from 'react';\nimport styles from './List.module.scss'\nimport { getArticleList } from '../../api/ArticlesAPI';\nimport { IArticle, ObjArrMap } from '../../types/index';\nimport ListItem from './ListItem';\nimport { Select, Divider, BackTop } from 'antd';\nimport { placeArr, useEventListener } from '../../utils';\nimport deepClone from 'deep-clone';\n\nimport AutoResponsive from \"autoresponsive-react\";\n\nexport default function List() {\n  const getCurClientWidth = function () {\n    return Math.floor(document.body.clientWidth * 0.96)\n  }\n  const [list, setList] = React.useState<Array<IArticle>>([]);\n  const [clientWidth, setClientWidth] = React.useState(getCurClientWidth());\n  const autoResponsiveProps = {\n    itemMargin: 10,\n    itemClassName: 'articleItem',\n    transitionDuration: '.5',\n    gridWidth: 10,\n    transitionTimingFunction: 'easeIn',\n    containerWidth: clientWidth,\n  };\n  const resize = function () {\n    setClientWidth(getCurClientWidth);\n  }\n  useEventListener('resize', resize);\n  const { Option } = Select;\n  const onSearch = () => {\n  }\n  const newestArr = [{ 'id': 'publish', name: '最新发布' }, { id: '' }, { 'id': 'comment', name: '最新评论' }];\n  const [newestType, setNewestType] = React.useState<string>(`publish`);\n  function onPlaceChange(val: any) {\n  }\n  function changeNewest(type: string) {\n    setNewestType(type);\n    if (type == 'publish') {\n      sortByPublish();\n    } else {\n      sortByComment();\n    }\n  }\n\n  function sortByPublish(effectiveList?: Array<IArticle>) {\n    let arr = effectiveList || deepClone(list);\n    arr.sort((a, b) => {\n      return new Date(b.publishTime).getTime() - new Date(a.publishTime).getTime();\n    })\n    setList(arr);\n  }\n  function sortByComment() {\n    let arr = deepClone(list);\n    arr.sort((a, b) => {\n      return new Date(b.lastResponse || \"1970-12-12 00:00:00\").getTime() - new Date(a.lastResponse).getTime();\n    })\n    setList(arr);\n  }\n  function filterEffectiveDat(list: Array<IArticle>) {\n    let arr = deepClone(list);\n    arr = arr.filter((item) => {\n      return item.link\n    })\n    return arr;\n  }\n  const categorys = [{ 'id': 'all', name: '全部' }, { 'id': 'type', name: '类型' }, { 'id': 'place', name: '位置' }, { 'id': 'hobby', name: '爱好' }, { 'id': 'work', name: '工作' }, { 'id': 'condition', name: '条件' }, { 'id': 'tag', name: '标签' }];\n  const typeArr = [{ 'id': 'all', name: '全部' }, { 'id': 'makeFriends', name: '征友' }, { 'id': 'discuss', name: '讨论' }, { 'id': 'help', name: '互助' }, { 'id': 'share', name: '分享' }, { 'id': 'diary', name: '日记' },];\n  const placeArr = [{ 'id': 'all', name: '全部' }, { 'id': 'shenzhen', name: '深圳' }, { 'id': 'guangzhou', name: '广州' }, { 'id': 'beijing', name: '北京' }, { 'id': 'shanghai', name: '上海' }, { 'id': 'chengdu', name: '成都' }, { 'id': 'hangzhou', name: '杭州' }, { 'id': 'otherPlace', name: '其他' },];\n  const hobbyArr = [{ 'id': 'all', name: '全部' }, { 'id': 'sports', name: '运动' }, { 'id': 'game', name: '游戏' }, { 'id': 'music', name: '音乐' }, { 'id': 'travel', name: '旅行' }, { 'id': 'food', name: '美食' }, { 'id': 'takePicture', name: '摄影' }, { 'id': 'pet', name: '宠物' }, { 'id': 'otherHobby', name: '其他' },];\n  const workArr = [{ 'id': 'all', name: '全部' }, { 'id': 'internet', name: '互联网' }, { 'id': 'private', name: '个人' }, { 'id': 'financial', name: '金融' }, { 'id': 'education', name: '教育' }, { 'id': 'student', name: '学生' }, { 'id': 'otherWork', name: '其他' },];\n  const conditionArr = [{ 'id': 'all', name: '全部' }, { 'id': '1', name: '1' }, { 'id': '0', name: '0' }, { 'id': '0.5', name: '0.5' }, { 'id': 'out', name: '出柜' }, { 'id': 'formMarriage', name: '形婚' }, { 'id': 'neverMarriage', name: '不婚' }, { 'id': 'marriaged', name: '已婚' }, { 'id': 'stable', name: '稳定' }, { 'id': 'otherCondition', name: '其他' },];\n  const tagArr = [{ 'id': 'all', name: '全部' }, { 'id': 'house', name: '租房' }, { 'id': 'highEducation', name: '高学历' }, { 'id': 'aids', name: '艾滋' }, { 'id': 'depression', name: '抑郁' }, { 'id': 'soldier', name: '军人' }, { 'id': 'uncle', name: '大叔' }, { 'id': 'spring', name: '春节' }, { 'id': 'open', name: '开放式' }, { 'id': 'otherTag', name: '其他' },];\n  const categoryArrMap: ObjArrMap = {\n    type: typeArr,\n    place: placeArr,\n    hobby: hobbyArr,\n    work: workArr,\n    condition: conditionArr,\n    tag: tagArr,\n  };\n  const [category, setCategory] = React.useState<string>(`all`);\n  const [type, setType] = React.useState<string>(`all`);\n  const [place, setPlace] = React.useState<string>(`all`);\n  const [hobby, setHobby] = React.useState<string>(`all`);\n  const [work, setWork] = React.useState<string>(`all`);\n  const [condition, setCondition] = React.useState<string>(`all`);\n  const [tag, setTag] = React.useState<string>(`all`);\n  const [secondSearch, setSecondSearch] = React.useState<string>(`all`);\n\n  function changeCategory(type: string) {\n    setCategory(type)\n  }\n  React.useEffect(() => {\n    getArticleList().then((data: any) => {\n      sortByPublish(filterEffectiveDat(data));\n    });\n  }, []);\n  return (\n    <div id=\"home-list\" className={styles.homeList}>\n      <BackTop />\n      <div className={styles.searchContainer}>\n        {/* <Select showSearch onChange={onPlaceChange} style={{ width: 200 }} placeholder=\"选择地点关键词\">\n          {\n            placeArr.map((val, index) => {\n              return <Option key={index} value={val}>{val}</Option>\n            })\n          }\n        </Select> */}\n        <div className={styles.searchTop}>\n          <div className={styles.left}>\n            <i className={`icon-filter`}></i>\n            <span>过滤</span>\n          </div>\n          <div className={styles.right}>\n            {\n              newestArr.map((newestObj, index) => {\n                if (!newestObj.id) {\n                  return <Divider key={20} type=\"vertical\" />\n                } else {\n                  return <span key={index} className={newestType === newestObj.id ? styles.cur : ''} onClick={() => {\n                    changeNewest(newestObj.id);\n                  }}>{newestObj.name}</span>\n                }\n              })\n            }\n          </div>\n        </div>\n        <div className={styles.searchCategory}>\n          <ul>\n            {\n              categorys.map((categoryObj, index) => {\n                return <li onClick={() => {\n                  changeCategory(categoryObj.id);\n                }} key={index} id={categoryObj.id} className={category === categoryObj.id ? styles.cur : ''} >{categoryObj.name}</li>\n              })\n            }\n          </ul>\n        </div>\n        <div className={styles.secondSearch}>\n          <ul>\n            {\n              category && category != 'all' && categoryArrMap[category].map((item, index) => {\n                return <li onClick={() => {\n                }} key={item.id + index} id={item.id} className={secondSearch === item.id ? styles.cur : ''} >{item.name}</li>\n              })\n            }\n          </ul>\n        </div>\n        <div className={styles.listContainer}>\n          {<AutoResponsive   {...autoResponsiveProps} >\n            {\n              list.map((item, index) => {\n                if (!item.keyWords) item.keyWords = [];\n                const itemWidth = Math.floor((clientWidth / 2 - 16));\n                const titleHeight = 48, contentHeight = item.frontContent ? 54 : 0, authorHeight = 24, dataHeight = 54, tagHeight = (Math.ceil(item.keyWords.length / 3)) * 22;\n                const bottomHeight = titleHeight + contentHeight + authorHeight + dataHeight + tagHeight + 92;//50 margin\n                const itemHeight = item.imgRate ? (itemWidth * item.imgRate + bottomHeight) : bottomHeight;\n                return <ListItem key={item.link + index} newestType={newestType} article={item} style={{ width: itemWidth, height: itemHeight }} />\n              })\n            }\n          </AutoResponsive>\n          }\n        </div>\n      </div >\n    </div>\n  );\n}\n","import { CLOUD_URL_PREFIX } from '../utils';\nimport axios from 'axios';\n\n\nexport function getArticleList() {\n  return new Promise((resolve, reject) => {\n    try {\n      axios.get(`${CLOUD_URL_PREFIX}/listData.js`).then((res) => {\n        resolve(res.data.list);\n      }, (error) => {\n        console.log(error);\n        reject();\n      })\n    } catch (error) {\n      console.log(error);\n      reject();\n    }\n  });\n}\n\n\n\n","import React from 'react';\nimport List from './List';\nimport { RouteComponentProps } from '@reach/router';\n\n\nexport default function Home(_: RouteComponentProps) {\n  return (\n    <div className=\"home-page\">\n      <List />\n    </div>\n  );\n}\n","import { navigate } from '@reach/router';\nimport axios from 'axios';\nimport jwtDecode from 'jwt-decode';\n\nexport const TOKEN_KEY = 'token';\n\naxios.defaults.baseURL = 'https://conduit.productionready.io/api';\naxios.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    switch (error.response.status) {\n      case 401:\n        navigate('/register');\n        break;\n      case 404:\n      case 403:\n        navigate('/');\n        break;\n    }\n    return Promise.reject(error.response);\n  },\n);\n\nexport function setToken(token: string | null) {\n  if (token) {\n    axios.defaults.headers.common['Authorization'] = `Token ${token}`;\n  } else {\n    delete axios.defaults.headers.common['Authorization'];\n  }\n}\n\ntype JWTPayload = {\n  id: string;\n  username: string;\n  exp: number;\n};\n\nexport function isTokenValid(token: string) {\n  try {\n    const decoded_jwt: JWTPayload = jwtDecode(token);\n    const current_time = Date.now().valueOf() / 1000;\n    return decoded_jwt.exp > current_time;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport default axios;\n","import API, { TOKEN_KEY } from './APIUtils';\nimport { IUser } from '../types';\nimport { setLocalStorage } from '../utils';\nimport { setToken } from './APIUtils';\n\ntype User = {\n  user: IUser & { token: string };\n};\n\nfunction handleUserResponse({ user: { token, ...user } }: User) {\n  setLocalStorage(TOKEN_KEY, token);\n  setToken(token);\n  return user;\n}\n\nexport function getCurrentUser() {\n  return API.get<User>('/user');\n}\n\nexport function login(email: string, password: string) {\n  return API.post<User>('/users/login', {\n    user: { email, password },\n  }).then((user) => handleUserResponse(user.data));\n}\n\nexport function register(user: {\n  username: string;\n  email: string;\n  password: string;\n}) {\n  return API.post<User>('/users', { user }).then((user) =>\n    handleUserResponse(user.data),\n  );\n}\n\nexport function updateUser(user: IUser & Partial<{ password: string }>) {\n  return API.put<User>('/user', { user });\n}\n\nexport function logout() {\n  localStorage.removeItem(TOKEN_KEY);\n  setToken(null);\n}\n","import { IUser } from '../types';\n\nexport type AuthAction =\n  | {\n      type: 'LOGIN';\n    }\n  | {\n      type: 'LOAD_USER';\n      user: IUser;\n    }\n  | { type: 'LOGOUT' };\n\nexport interface AuthState {\n  isAuthenticated: boolean;\n  user: IUser | null;\n}\n\nexport const initialState: AuthState = {\n  isAuthenticated: false,\n  user: null,\n};\n\nexport function authReducer(state: AuthState, action: AuthAction): AuthState {\n  switch (action.type) {\n    case 'LOGIN': {\n      return { ...state, isAuthenticated: true };\n    }\n    case 'LOAD_USER': {\n      return { ...state, user: action.user };\n    }\n    case 'LOGOUT': {\n      return { isAuthenticated: false, user: null };\n    }\n    default:\n      return state;\n  }\n}\n","import React from 'react';\nimport {\n  authReducer,\n  initialState,\n  AuthAction,\n  AuthState,\n} from '../reducers/auth';\nimport { getLocalStorageValue } from '../utils';\nimport { TOKEN_KEY, setToken, isTokenValid } from '../api/APIUtils';\nimport { logout } from '../api/AuthAPI';\n\ntype AuthContextProps = {\n  state: AuthState;\n  dispatch: React.Dispatch<AuthAction>;\n};\n\nconst AuthContext = React.createContext<AuthContextProps>({\n  state: initialState,\n  dispatch: () => initialState,\n});\n\nexport function AuthProvider(props: React.PropsWithChildren<{}>) {\n  const [state, dispatch] = React.useReducer(authReducer, initialState);\n  React.useEffect(() => {\n    const token = getLocalStorageValue(TOKEN_KEY);\n\n    if (!token) return;\n\n    if (isTokenValid(token)) {\n      setToken(token);\n      dispatch({ type: 'LOGIN' });\n    } else {\n      dispatch({ type: 'LOGOUT' });\n      logout();\n    }\n  }, []);\n\n  return <AuthContext.Provider value={{ state, dispatch }} {...props} />;\n}\n\nexport default function useAuth() {\n  return React.useContext(AuthContext);\n}\n","import React from 'react';\nimport { IErrors } from '../../types';\n\nexport default function ListErrors({ errors }: { errors: IErrors }) {\n  return (\n    <ul className=\"error-messages\">\n      {Object.entries(errors).map(([key, keyErrors], index) =>\n        keyErrors.map((error) => (\n          <li key={index}>\n            {key} {error}\n          </li>\n        )),\n      )}\n    </ul>\n  );\n}\n","import React from 'react';\nimport { Link, navigate, RouteComponentProps, Redirect } from '@reach/router';\nimport { register } from '../api/AuthAPI';\nimport useAuth from '../context/auth';\nimport ListErrors from './common/ListErrors';\nimport { IErrors } from '../types';\n\nexport default function Register(_: RouteComponentProps) {\n  const [form, setForm] = React.useState({\n    username: '',\n    email: '',\n    password: '',\n  });\n\n  const [loading, setLoading] = React.useState(false);\n  const [errors, setErrors] = React.useState<IErrors | null>(null);\n  const {\n    state: { user },\n    dispatch,\n  } = useAuth();\n\n  const handleChange = (event: React.FormEvent<HTMLInputElement>) => {\n    setForm({\n      ...form,\n      [event.currentTarget.name]: event.currentTarget.value,\n    });\n  };\n\n  const handleSubmit = async (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    setLoading(true);\n    const { username, email, password } = form;\n    try {\n      const user = await register({ username, email, password });\n      dispatch({ type: 'LOAD_USER', user });\n      navigate('/');\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n      if (error.status === 422) {\n        setErrors(error.data.errors);\n      }\n    }\n  };\n\n  if (user) {\n    return <Redirect to=\"/\" noThrow />;\n  }\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\n            <h1 className=\"text-xs-center\">Sign up</h1>\n            <p className=\"text-xs-center\">\n              <Link to=\"/login\">Have an account?</Link>\n            </p>\n            {errors && <ListErrors errors={errors} />}\n            <form onSubmit={handleSubmit}>\n              <fieldset className=\"form-group\">\n                <input\n                  name=\"username\"\n                  className=\"form-control form-control-lg\"\n                  type=\"text\"\n                  value={form.username}\n                  placeholder=\"Your Name\"\n                  onChange={handleChange}\n                />\n              </fieldset>\n              <fieldset className=\"form-group\">\n                <input\n                  name=\"email\"\n                  className=\"form-control form-control-lg\"\n                  type=\"email\"\n                  value={form.email}\n                  placeholder=\"Email\"\n                  onChange={handleChange}\n                />\n              </fieldset>\n              <fieldset className=\"form-group\">\n                <input\n                  name=\"password\"\n                  className=\"form-control form-control-lg\"\n                  type=\"password\"\n                  value={form.password}\n                  placeholder=\"Password\"\n                  onChange={handleChange}\n                />\n              </fieldset>\n              <button\n                className=\"btn btn-lg btn-primary pull-xs-right\"\n                disabled={loading}\n              >\n                Sign Up\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { login } from '../api/AuthAPI';\nimport ListErrors from './common/ListErrors';\nimport useAuth from '../context/auth';\nimport { navigate, Link, RouteComponentProps, Redirect } from '@reach/router';\nimport { IErrors } from '../types';\n\nexport default function Login(_: RouteComponentProps) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [loading, setLoading] = React.useState(false);\n  const [errors, setErrors] = React.useState<IErrors | null>();\n  const {\n    state: { user },\n    dispatch,\n  } = useAuth();\n\n  const handleSubmit = async (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    setLoading(true);\n    try {\n      const user = await login(email, password);\n      dispatch({ type: 'LOAD_USER', user });\n      navigate('/');\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n      if (error.status === 422) {\n        setErrors(error.data.errors);\n      }\n    }\n  };\n\n  if (user) {\n    return <Redirect to=\"/\" noThrow />;\n  }\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\n            <h1 className=\"text-xs-center\">Sign in</h1>\n            <p className=\"text-xs-center\">\n              <Link to=\"/register\">Need an account?</Link>\n            </p>\n            {errors && <ListErrors errors={errors} />}\n            <form onSubmit={handleSubmit}>\n              <fieldset className=\"form-group\">\n                <input\n                  name=\"email\"\n                  className=\"form-control form-control-lg\"\n                  type=\"email\"\n                  value={email}\n                  placeholder=\"Email\"\n                  onChange={(event) => setEmail(event.target.value)}\n                />\n              </fieldset>\n              <fieldset className=\"form-group\">\n                <input\n                  name=\"password\"\n                  className=\"form-control form-control-lg\"\n                  type=\"password\"\n                  value={password}\n                  placeholder=\"Password\"\n                  onChange={(event) => setPassword(event.target.value)}\n                />\n              </fieldset>\n              <button\n                className=\"btn btn-lg btn-primary pull-xs-right\"\n                type=\"submit\"\n                disabled={loading}\n              >\n                Sign In\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { IProfile } from '../../types';\n\ntype FollowUserButtonProps = {\n  profile: IProfile;\n  onClick: () => void;\n  loading: boolean;\n};\n\nexport default function FollowUserButton({\n  profile,\n  onClick,\n  loading,\n}: FollowUserButtonProps) {\n  const classNames = ['btn', 'btn-sm', 'action-btn'];\n  let text = '';\n\n  if (profile.following) {\n    classNames.push('btn-secondary');\n    text += `Unfollow ${profile.username}`;\n  } else {\n    classNames.push('btn-outline-secondary');\n    text += `Follow ${profile.username}`;\n  }\n\n  return (\n    <button\n      className={classNames.join(' ')}\n      onClick={onClick}\n      disabled={loading}\n    >\n      <i className=\"ion-plus-round\" />\n      &nbsp;\n      {text}\n    </button>\n  );\n}\n","import API from './APIUtils';\nimport { IProfile } from '../types';\n\ntype Profile = {\n  profile: IProfile;\n};\n\nexport function followProfile(username: string) {\n  return API.post<Profile>(`/profiles/${username}/follow`);\n}\n\nexport function getProfile(username: string) {\n  return API.get<Profile>(`/profiles/${username}`);\n}\n\nexport function unfollowProfile(username: string) {\n  return API.delete<Profile>(`/profiles/${username}/follow`);\n}\n","import React from 'react';\nimport { Link, RouteComponentProps } from '@reach/router';\nimport FollowUserButton from './common/FollowUserButton';\nimport { IProfile } from '../types';\nimport useAuth from '../context/auth';\nimport { unfollowProfile, followProfile, getProfile } from '../api/ProfileAPI';\nimport { ALT_IMAGE_URL } from '../utils';\n\nexport default function Profile({\n  username = '',\n}: RouteComponentProps<{ username: string }>) {\n  const [profile, setProfile] = React.useState<IProfile | null>(null);\n  const [loading, setLoading] = React.useState(false);\n  const {\n    state: { user },\n  } = useAuth();\n\n  React.useEffect(() => {\n    let ignore = false;\n\n    async function fetchProfile() {\n      try {\n        const payload = await getProfile(username);\n        if (!ignore) {\n          setProfile(payload.data.profile);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    fetchProfile();\n    return () => {\n      ignore = true;\n    };\n  }, [username]);\n\n  const handleClick = async () => {\n    if (!profile) return;\n    let payload;\n    setLoading(true);\n    try {\n      if (profile.following) {\n        payload = await unfollowProfile(profile.username);\n      } else {\n        payload = await followProfile(profile.username);\n      }\n      setProfile(payload.data.profile);\n    } catch (error) {\n      console.log(error);\n    }\n    setLoading(false);\n  };\n\n  const isUser = profile && user && profile.username === user.username;\n\n  return (\n    profile && (\n      <div className=\"profile-page\">\n        <div className=\"user-info\">\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-xs-12 col-md-10 offset-md-1\">\n                <img\n                  src={profile.image || ALT_IMAGE_URL}\n                  className=\"user-img\"\n                  alt={profile.username}\n                />\n                <h4>{profile.username}</h4>\n                <p>{profile.bio}</p>\n                {isUser ? (\n                  <EditProfileSettings />\n                ) : (\n                    <FollowUserButton\n                      profile={profile}\n                      onClick={handleClick}\n                      loading={loading}\n                    />\n                  )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  );\n}\n\nfunction EditProfileSettings() {\n  return (\n    <Link\n      to=\"/settings\"\n      className=\"btn btn-sm btn-outline-secondary action-btn\"\n    >\n      <i className=\"ion-gear-a\"></i> Edit Profile Settings\n    </Link>\n  );\n}\n","import React from 'react';\nimport { navigate, RouteComponentProps } from '@reach/router';\nimport ListErrors from './common/ListErrors';\nimport useAuth from '../context/auth';\nimport { updateUser, logout } from '../api/AuthAPI';\nimport { IErrors } from '../types';\n\nexport default function Settings(_: RouteComponentProps) {\n  const {\n    state: { user },\n    dispatch,\n  } = useAuth();\n  const [loading, setLoading] = React.useState(false);\n  const [errors, setErrors] = React.useState<IErrors | null>(null);\n  const [form, setForm] = React.useState({\n    username: '',\n    email: '',\n    image: '',\n    bio: '',\n    password: '',\n  });\n\n  React.useEffect(() => {\n    if (user) {\n      const { username, email, image, bio } = user;\n      console.log(username, email, image, bio);\n      setForm({\n        username,\n        email,\n        image: image || '',\n        bio: bio || '',\n        password: '',\n      });\n    }\n  }, [user]);\n\n  const handleChange = (\n    event: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>,\n  ) => {\n    setForm({\n      ...form,\n      [event.currentTarget.name]: event.currentTarget.value,\n    });\n  };\n\n  const handleSubmit = async (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    setLoading(true);\n    if (!form.password) {\n      delete form.password;\n    }\n    try {\n      const payload = await updateUser(form);\n      dispatch({ type: 'LOAD_USER', user: payload.data.user });\n    } catch (error) {\n      console.log(error);\n      if (error.status === 422) {\n        setErrors(error.data.errors);\n      }\n    }\n    setLoading(false);\n  };\n\n  const handleLogout = () => {\n    dispatch({ type: 'LOGOUT' });\n    logout();\n    navigate('/');\n  };\n\n  return (\n    <div className=\"settings-page\">\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\n            <h1 className=\"text-xs-center\">Your Settings</h1>\n            {errors && <ListErrors errors={errors} />}\n            <form onSubmit={handleSubmit}>\n              <fieldset>\n                <div className=\"form-group\">\n                  <input\n                    name=\"image\"\n                    className=\"form-control\"\n                    type=\"text\"\n                    placeholder=\"URL of profile picture\"\n                    value={form.image}\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    name=\"username\"\n                    className=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Username\"\n                    value={form.username}\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <textarea\n                    name=\"bio\"\n                    className=\"form-control form-control-lg\"\n                    rows={8}\n                    placeholder=\"Short bio about you\"\n                    value={form.bio}\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    name=\"email\"\n                    className=\"form-control form-control-lg\"\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    value={form.email}\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    name=\"password\"\n                    className=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"New Password\"\n                    value={form.password}\n                    onChange={handleChange}\n                  />\n                </div>\n                <button\n                  className=\"btn btn-lg btn-primary pull-xs-right\"\n                  type=\"submit\"\n                  disabled={loading}\n                >\n                  Update Settings\n                </button>\n              </fieldset>\n            </form>\n            <hr />\n            <button className=\"btn btn-outline-danger\" onClick={handleLogout}>\n              Or click here to logout.\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport useAuth from '../context/auth';\nimport Home from './Home';\nimport { RouteComponentProps } from '@reach/router';\n\ninterface PrivateRouteProps extends RouteComponentProps {\n  as: React.ElementType<any>;\n}\n\nexport default function PrivateRoute({\n  as: Comp,\n  ...props\n}: PrivateRouteProps) {\n  const {\n    state: { user },\n  } = useAuth();\n  return user ? <Comp {...props} /> : <Home />;\n}\n","import React from 'react';\r\nimport { Router, Redirect } from '@reach/router';\r\nimport Home from '../components/Home';\r\nimport Register from '../components/Register';\r\nimport Login from '../components/Login';\r\nimport Profile from '../components/Profile';\r\nimport Settings from '../components/Settings';\r\nimport PrivateRoute from '../components/PrivateRoute';\r\n\r\nexport function Routes() {\r\n  return (\r\n    <React.Fragment>\r\n      <Router>\r\n        <Redirect from=\"/\" to=\"/douban/home\" noThrow default />\r\n        <Home path=\"/douban/home\" />\r\n        <Register path=\"/douban/register\" />\r\n        <Login path=\"login\" />\r\n        <Profile path=\":username\" />\r\n        <PrivateRoute as={Settings} path=\"/settings\" />\r\n\r\n      </Router>\r\n    </React.Fragment>\r\n  )\r\n}","import React from 'react';\nimport { Routes } from '../routes/Routes';\nimport Header from './Header';\nimport { getCurrentUser } from '../api/AuthAPI';\nimport useAuth, { AuthProvider } from '../context/auth';\n\n\nfunction App() {\n  const {\n    state: { user, isAuthenticated },\n    dispatch,\n  } = useAuth();\n\n  React.useEffect(() => {\n    let ignore = false;\n\n    async function fetchUser() {\n      try {\n        const payload = await getCurrentUser();\n        const { token, ...user } = payload.data.user;\n        if (!ignore) {\n          dispatch({ type: 'LOAD_USER', user });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    if (!user && isAuthenticated) {\n      fetchUser();\n    }\n\n    return () => {\n      ignore = true;\n    };\n  }, [dispatch, isAuthenticated, user]);\n\n  if (!user && isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <Routes />\n    </React.Fragment>\n  );\n}\n\nexport default () => (\n  <AuthProvider>\n    <App />\n  </AuthProvider >\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n/* antd全局样式文件 */\nimport \"antd/dist/antd.css\";\nimport './assets/css/index.css';\nimport App from './components/App';\n/* 引入markdown编辑器 */\nimport 'mavon-editor/dist/css/index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"ListItem_listItem__2Kpsv\",\"noImg\":\"ListItem_noImg__NLfhW\",\"dataContainer\":\"ListItem_dataContainer__kZO2k\",\"tag\":\"ListItem_tag__3NL6f\",\"textContainer\":\"ListItem_textContainer__2Ewqv\",\"imgContainer\":\"ListItem_imgContainer__3f48Y\",\"authorPic\":\"ListItem_authorPic__3tsWT\",\"title\":\"ListItem_title__2C4C0\",\"frontContent\":\"ListItem_frontContent__19ceW\",\"author\":\"ListItem_author__3LTIe\",\"dataItem\":\"ListItem_dataItem__2x53R\"};"],"sourceRoot":""}
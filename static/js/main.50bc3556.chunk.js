(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,a,t){e.exports=t(269)},143:function(e,a,t){},269:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(5),o=t.n(c),i=(t(142),t(143),t(10)),s=t.n(i),l=t(40),m=t(17),u=t(9),d=t(3),f=t(7),p=t.n(f),g="https://douban-1300076408.cos.ap-guangzhou.myqcloud.com/alt.png",h="https://douban-1300076408.cos.ap-guangzhou.myqcloud.com";var v={makeFriends:["\u5f81\u53cb","\u4ea4\u53cb","\u627eBF","\u627ebf","\u627e\u7537\u670b\u53cb","\u627e\u7537\u53cb","\u84b8\u7537\u53cb","\u627e\u5bf9\u8c61","\u5f81bf","\u8131\u5355","\u627e\u670b\u53cb","\u5355\u8eab"],discuss:["\u8ba8\u8bba"],help:["\u4e92\u52a9"],share:["\u5206\u4eab"],diary:["\u65e5\u8bb0"],shenzhen:["\u6df1\u5733","sz"],guangzhou:["\u5e7f\u5dde","gz"],beijing:["\u5317\u4eac","\u671d\u9633"],shanghai:["\u4e0a\u6d77","\u9b54\u90fd","sh"],chengdu:["\u6210\u90fd"],hangzhou:["\u676d\u5dde"],otherPlace:["\u4e00\u7ebf\u57ce\u5e02","\u91cd\u5e86","\u5b89\u5fbd","\u5b81\u6ce2","\u6b66\u6c49","\u65b0\u7586","\u6c55\u5934","\u4f5b\u5c71","\u5357\u4eac","\u5c71\u4e1c","\u6d77\u5357","\u957f\u6c99","\u5357\u5b81","\u798f\u5dde","\u798f\u5efa","\u54c8\u5c14\u6ee8","\u6d77\u5357","\u4e91\u5357","\u897f\u5b89","\u53a6\u95e8","\u4e1c\u5317","\u6d59\u6c5f","\u5929\u6d25","\u6f6e\u6c55","\u6e56\u5357","\u6e56\u5317","\u6606\u660e","\u5927\u7406","\u5b81\u6ce2","\u56db\u5ddd"],sports:["\u5065\u8eab","\u8fd0\u52a8","\u953b\u70bc","\u64b8\u94c1","\u7fbd\u6bdb\u7403","\u6e38\u6cf3","\u722c\u5c71","\u8db3\u7403","\u7bee\u7403","\u5f92\u6b65","\u8dd1\u6b65","\u9a6c\u62c9\u677e"],game:["\u6e38\u620f","\u738b\u8005","\u5403\u9e21","\u4e91\u9876","\u5b9d\u53ef\u68a6"],music:["\u97f3\u4e50","\u542c\u6b4c","\u5531\u6b4c","\u6f14\u5531\u4f1a"],travel:["\u65c5\u6e38","\u65c5\u884c","\u7a77\u6e38"],food:["\u7f8e\u98df","\u505a\u996d","\u5403\u8d27"],takePicture:["\u62cd\u6444","\u6444\u5f71","\u62cd\u7167"],pet:["\u732b","\u72d7"],otherHobby:["\u8df3\u821e","\u6237\u5916","\u5267\u672c\u6740","\u9152\u5427","\u7535\u5f71","\u9605\u8bfb","\u6c49\u670d","\u8bfb\u4e66","\u8bdd\u5267","\u9ebb\u5c06"],internet:["\u4e92\u8054\u7f51","\u7a0b\u5e8f\u5458","IT","\u8fd0\u8425","\u4ea7\u54c1","\u8bbe\u8ba1","\u7b56\u5212"],private:["\u7535\u5546","\u81ea\u5a92\u4f53","VLOG"],financial:["\u94f6\u884c","\u91d1\u878d"],education:["\u8001\u5e08","\u6559\u5e08","\u57f9\u8bad","\u79d1\u7814"],student:["\u8bfb\u7814","\u5b66\u751f","\u5927\u5b66","\u5b9e\u4e60"],otherWork:["\u9152\u5e97","\u5730\u4ea7","\u5efa\u7b51","\u836f\u4f01","\u533b\u836f","\u673a\u68b0","\u7ba1\u7406","\u516c\u52a1\u5458","HR","\u519b\u4eba","\u884c\u4e1a","\u56fd\u4f01"],1:["\u627e0","\u67090","\u8001\u5a46"," 1","\u7eaf1","top"],0:["\u627e1","\u67091","\u8001\u516c"," 0",,"\u504f0","\u7eaf0","bottom","btm","\u4e56\u5de7","\u504f\u53d7","\u59d0\u59b9","\u88ab\u52a8"],.5:["0.5","\u4e0d10","0.6","0.8","\u4e92\u653b"],out:["\u51fa\u67dc"],formMarriage:["\u5f62\u5a5a"],neverMarriage:["\u4e0d\u5a5a"],surrogacy:["\u4ee3\u5b55"],stable:["\u7a33\u5b9a","\u72ec\u7acb"],otherCondition:["\u6709\u623f","\u5927\u53d4","\u808c\u8089","\u4e0d\u62bd\u70df","\u4e0d\u559d\u9152","\u718a","\u72d2\u72d2","\u4e0d\u5a18"],house:["\u79df\u623f","\u5408\u79df","\u6574\u79df","\u623f\u6e90"],highEducation:["\u7855\u58eb","\u535a\u58eb","\u6d77\u5f52","\u7559\u5b66"],aids:["\u827e\u6ecb","\u963b\u65ad","\u9ad8\u5371","AIDS","\u611f\u67d3"],depression:["\u6291\u90c1","\u5931\u7720","\u7126\u8651"],spring:["\u6625\u8282","\u8fc7\u5e74"],open:["\u5f00\u653e\u5f0f"],otherTag:["\u5929\u4f53","SM","\u725b\u519c","\u7406\u5de5","\u6587\u79d1","\u4e09\u5341","\u5b85","90","00","80","\u5df2\u5a5a","\u76f4\u5973","GAY\u871c","\u53cc\u6027\u604b","\u95fa\u871c","\u4e2d\u5e74","\u62c9\u62c9","\u5b89\u5229","\u8d44\u6e90"]};var E=t(119),b=t.n(E),N=t(28),w=t.n(N),k=new b.a({SecretId:"AKIDiEUTDi7zlHXY73Ia8RVKthFYgYAZpaib",SecretKey:"pQwDF7lALK4j9LH4f6JHAoEOIxOdcEiy"});function y(e){return new Promise(function(a,t){var n=new Date,r="feedBack/".concat(function(e,a){var t,n={"Y+":a.getFullYear().toString(),"m+":(a.getMonth()+1).toString(),"d+":a.getDate().toString(),"H+":a.getHours().toString(),"M+":a.getMinutes().toString(),"S+":a.getSeconds().toString()};for(var r in n)(t=new RegExp("("+r+")").exec(e))&&(e=e.replace(t[1],1==t[1].length?n[r]:n[r].padStart(t[1].length,"0")));return e}("YYYY-mm-dd HH:MM",n),"-").concat(n.getTime(),".txt");k.putObject({Bucket:"douban-1300076408",Region:"ap-guangzhou",Key:r,Body:e},function(e,n){console.log(e||n),n?a(n):t(e)})})}var C=t(4),O=t.n(C),_=t(276);function S(e){var a=e.article,t=e.style,n=e.newestType;r.a.useEffect(function(){},[]);var c=a.imgLinks&&a.imgLinks.length,o=["volcano","blue","cyan","gold","geekblue","magenta","lime","red"],i=c?"":O.a.noImg,s="publish"===n;return r.a.createElement("div",{className:"".concat(O.a.listItem," ").concat(i),style:t},r.a.createElement("a",{href:a.link,className:O.a.card},c?r.a.createElement("div",{className:O.a.imgContainer},r.a.createElement("img",{src:"".concat(a.imgLinks[0]),width:t.width,height:t.width*a.imgRate})):"",r.a.createElement("div",{className:O.a.textContainer},r.a.createElement("div",{className:O.a.dataContainer},r.a.createElement("span",{title:a.isEliteArticle?"\u7cbe\u534e\u5e16 - ".concat(a.title):a.title},r.a.createElement("span",{className:O.a.title},a.isEliteArticle?r.a.createElement("i",{className:"icon-heart"},"\u7cbe"):"","".concat(a.title)))),r.a.createElement("div",{className:O.a.dataContainer},r.a.createElement("span",{title:"\u5185\u5bb9\uff1a".concat(a.frontContent)},r.a.createElement("span",{className:O.a.frontContent},a.frontContent))),r.a.createElement("div",{className:O.a.dataContainer},r.a.createElement("span",{title:"\u4f5c\u8005\uff1a".concat(a.author)},r.a.createElement("img",{className:O.a.authorPic,src:a.authorPic}),r.a.createElement("span",{className:O.a.author},a.author))),r.a.createElement("div",{className:O.a.dataContainer},r.a.createElement("span",{className:O.a.dataItem,title:"\u6587\u7ae0\u5185\u5bb9\u957f\u5ea6\uff1a".concat(a.contentLength)},r.a.createElement("i",{className:"icon-contentLength"}),r.a.createElement("span",{className:O.a.text},"\u6587\u957f",a.contentLength)),r.a.createElement("span",{className:O.a.dataItem,title:"\u7167\u7247\u6570\u91cf\uff1a".concat(c?a.imgLinks.length:0)},r.a.createElement("i",{className:"icon-photo"}),r.a.createElement("span",{className:O.a.text},"\u7167\u7247",c?a.imgLinks.length:0))),r.a.createElement("div",{className:O.a.dataContainer},r.a.createElement("span",{className:O.a.dataItem,title:"\u8bc4\u8bba\u6570\uff1a".concat(a.responseCount)},r.a.createElement("i",{className:"icon-response2"}),r.a.createElement("span",{className:O.a.text},"\u8bc4\u8bba",a.responseCount)),r.a.createElement("span",{className:O.a.dataItem,title:"\u70b9\u8d5e\u6570\uff1a".concat(a.likeCount)},r.a.createElement("i",{className:"icon-like"}),r.a.createElement("span",{className:O.a.text},"\u70b9\u8d5e",a.likeCount))),r.a.createElement("div",{className:O.a.dataContainer},r.a.createElement("span",{className:O.a.keyWordContainer,title:"\u5173\u952e\u8bcd\uff1a".concat(a.keyWords.join("\uff0c"))},a.keyWords.map(function(e,a){return r.a.createElement(_.a,{key:a,className:O.a.tag,color:o[a%8]},e)}))),r.a.createElement("div",{className:"".concat(O.a.dataContainer," ").concat(O.a.publishTimeContainer)},r.a.createElement("span",null,r.a.createElement("i",{className:"icon-time"}),r.a.createElement("span",{className:O.a.publishTime},s?a.publishTime:a.lastResponse))))))}var x=t(274),L=t(273),j=t(270),I=t(271),T=t(8),A=t(272),W=t(275),R=t(33),D=t.n(R),U=t(123),P=t.n(U),z=t(132),M=t.n(z);function Y(){var e=function(){return Math.floor(.96*document.body.clientWidth)},a=r.a.useState([]),t=Object(d.a)(a,2),n=t[0],c=t[1],o=r.a.useState([]),i=Object(d.a)(o,2),s=i[0],l=i[1],m=r.a.useState(e()),u=Object(d.a)(m,2),f=u[0],g=u[1],E={itemMargin:10,itemClassName:"articleItem",transitionDuration:".5",gridWidth:10,transitionTimingFunction:"easeIn",containerWidth:f};!function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,n={current:function(e){}};r.a.useEffect(function(){n.current=a},[a]),r.a.useEffect(function(){if(t&&t.addEventListener){var a=function(e){return n.current(e)};return t.addEventListener(e,a),function(){t.removeEventListener(e,a)}}},[e,t])}("resize",function(){g(e)});var b=r.a.useState("publish"),N=Object(d.a)(b,2),k=N[0],C=N[1];function O(e){C(e),"publish"==e?_():function(){var e=D()(s);e.sort(function(e,a){return new Date(a.lastResponse||"1970-12-12 00:00:00").getTime()-new Date(e.lastResponse).getTime()}),l(e)}()}function _(e){var a=e||D()(s);a.sort(function(e,a){return new Date(a.publishTime).getTime()-new Date(e.publishTime).getTime()}),l(a)}var R={type:[{id:"all",name:"\u5168\u90e8"},{id:"makeFriends",name:"\u5f81\u53cb"},{id:"discuss",name:"\u8ba8\u8bba"},{id:"help",name:"\u4e92\u52a9"},{id:"share",name:"\u5206\u4eab"},{id:"diary",name:"\u65e5\u8bb0"}],place:[{id:"all",name:"\u5168\u90e8"},{id:"shenzhen",name:"\u6df1\u5733"},{id:"guangzhou",name:"\u5e7f\u5dde"},{id:"beijing",name:"\u5317\u4eac"},{id:"shanghai",name:"\u4e0a\u6d77"},{id:"chengdu",name:"\u6210\u90fd"},{id:"hangzhou",name:"\u676d\u5dde"},{id:"otherPlace",name:"\u5176\u4ed6"}],hobby:[{id:"all",name:"\u5168\u90e8"},{id:"sports",name:"\u8fd0\u52a8"},{id:"game",name:"\u6e38\u620f"},{id:"music",name:"\u97f3\u4e50"},{id:"travel",name:"\u65c5\u884c"},{id:"food",name:"\u7f8e\u98df"},{id:"takePicture",name:"\u6444\u5f71"},{id:"pet",name:"\u5ba0\u7269"},{id:"otherHobby",name:"\u5176\u4ed6"}],work:[{id:"all",name:"\u5168\u90e8"},{id:"internet",name:"\u4e92\u8054\u7f51"},{id:"private",name:"\u4e2a\u4eba"},{id:"financial",name:"\u91d1\u878d"},{id:"education",name:"\u6559\u80b2"},{id:"student",name:"\u5b66\u751f"},{id:"otherWork",name:"\u5176\u4ed6"}],condition:[{id:"all",name:"\u5168\u90e8"},{id:"1",name:"1"},{id:"0",name:"0"},{id:"0.5",name:"0.5"},{id:"out",name:"\u51fa\u67dc"},{id:"formMarriage",name:"\u5f62\u5a5a"},{id:"neverMarriage",name:"\u4e0d\u5a5a"},{id:"surrogacy",name:"\u4ee3\u5b55"},{id:"stable",name:"\u7a33\u5b9a"},{id:"otherCondition",name:"\u5176\u4ed6"}],tag:[{id:"all",name:"\u5168\u90e8"},{id:"house",name:"\u79df\u623f"},{id:"highEducation",name:"\u9ad8\u5b66\u5386"},{id:"aids",name:"\u827e\u6ecb"},{id:"depression",name:"\u6291\u90c1"},{id:"spring",name:"\u6625\u8282"},{id:"open",name:"\u5f00\u653e\u5f0f"},{id:"otherTag",name:"\u5176\u4ed6"}]},U=r.a.useState("all"),z=Object(d.a)(U,2),Y=z[0],H=z[1],F=r.a.useState(!0),B=Object(d.a)(F,2),G=B[0],K=B[1],J={type:"all",place:"all",hobby:"all",work:"all",condition:"all",tag:"all"},q=r.a.useState(J),V=Object(d.a)(q,2),Q=V[0],X=V[1],Z=r.a.useState("all"),$=Object(d.a)(Z,2),ee=$[0],ae=$[1],te=r.a.useState(!0),ne=Object(d.a)(te,2),re=ne[0],ce=ne[1],oe=r.a.useState(!1),ie=Object(d.a)(oe,2),se=ie[0],le=ie[1];var me=r.a.useState({visible:!1,confirmLoading:!1}),ue=Object(d.a)(me,2),de=ue[0],fe=ue[1],pe=r.a.useState(""),ge=Object(d.a)(pe,2),he=ge[0],ve=ge[1];return r.a.useEffect(function(){new Promise(function(e,a){try{w.a.get("".concat(h,"/listData.js")).then(function(a){e(a.data.list)},function(e){console.log(e),a()})}catch(t){console.log(t),a()}}).then(function(e){var a=function(e){var a=D()(e);return a=a.filter(function(e){return e.link})}(e);K(!1),c(D()(a)),_(a)})},[]),function(){if(n.length&&!re){var e=D()(n),a={},t=!1;for(var r in Q){var c=Q[r];"all"!==c&&(t=!0,a[r]=v[c].join(",")+",")}if(t){var o=function(t){var n=a[t];e=e.filter(function(e){var a=[],t=!0,r=!1,c=void 0;try{for(var o,i=e.keyWords[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;if(n.indexOf(s)>-1){a.push(s);break}}}catch(l){r=!0,c=l}finally{try{t||null==i.return||i.return()}finally{if(r)throw c}}return a.length})};for(var i in a)o(i)}e=e.filter(function(e){return!se||e.imgLinks&&e.imgLinks.length&&e.frontContent.length>50}),l(e),ce(!0)}}(),r.a.createElement("div",{id:"home-list",className:p.a.homeList},r.a.createElement(x.a,{className:p.a.backTop,visibilityHeight:100}),r.a.createElement("i",{className:"icon-planning ".concat(p.a.feedBack),onClick:function(){fe({visible:!0,confirmLoading:!1})}}),r.a.createElement(L.a,{title:"\u610f\u89c1\u53cd\u9988",className:p.a.modal,visible:de.visible,onOk:function(){fe({visible:!0,confirmLoading:!0}),y(he).then(function(){fe({visible:!1,confirmLoading:!1})},function(){fe({visible:!1,confirmLoading:!1})})},cancelText:"\u53d6\u6d88",okText:"\u63d0\u4ea4",confirmLoading:de.confirmLoading,onCancel:function(){fe({visible:!1,confirmLoading:!1})}},r.a.createElement(M.a,{onChange:function(e){ve(e.target.value)},rows:4,placeholder:"\u8bf7\u5c06\u60a8\u7684\u95ee\u9898\u53cd\u9988\uff0c\u529f\u80fd\u5efa\u8bae\u7b49\u63d0\u4ea4\u7ed9\u6211\u4eec\uff0c\u8ba9\u6211\u4eec\u4e00\u8d77\u8425\u9020\u4e00\u4e2a\u5e72\u51c0\u7684\u4ea4\u53cb\u793e\u533a"})),r.a.createElement("div",{className:p.a.htmlContainer},r.a.createElement("div",{className:p.a.searchContainer},r.a.createElement("div",{className:p.a.searchTop},r.a.createElement("div",{className:p.a.left},[{id:"publish",name:"\u6700\u65b0\u53d1\u5e03"},{id:""},{id:"comment",name:"\u6700\u65b0\u8bc4\u8bba"}].map(function(e,a){return e.id?r.a.createElement("span",{key:a,className:k===e.id?p.a.cur:"",onClick:function(){O(e.id)}},e.name):r.a.createElement(j.a,{key:20,type:"vertical"})})),r.a.createElement("div",{className:p.a.right},r.a.createElement(I.a,{onChange:function(e){le(e),ce(!1)},defaultChecked:se,checkedChildren:r.a.createElement("span",{className:p.a.switchSpan},r.a.createElement(T.a,{type:"check"}),"\u8bda\u610f\u8d34"),unCheckedChildren:r.a.createElement("span",{className:p.a.switchSpan},r.a.createElement(T.a,{type:"close"}),"\u8bda\u610f\u8d34")}))),r.a.createElement("div",{className:p.a.searchCategory},r.a.createElement("ul",null,[{id:"all",name:"\u5168\u90e8"},{id:"type",name:"\u7c7b\u578b"},{id:"place",name:"\u57ce\u5e02"},{id:"hobby",name:"\u7231\u597d"},{id:"work",name:"\u5de5\u4f5c"},{id:"condition",name:"\u6761\u4ef6"},{id:"tag",name:"\u6807\u7b7e"}].map(function(e,a){return r.a.createElement("li",{onClick:function(){var a;a=e.id,H(a),"all"===a?(X(J),ae("all"),ce(!1)):ae(Q[a])},key:a,id:e.id,className:Y===e.id?p.a.cur:""},e.name)}))),r.a.createElement("div",{className:p.a.secondSearch},r.a.createElement("ul",null,Y&&"all"!=Y&&R[Y].map(function(e,a){return r.a.createElement("li",{onClick:function(){!function(e){var a=D()(Q);a[Y]=e,X(a),ae(e),ce(!1)}(e.id)},key:e.id+a,id:e.id,className:ee===e.id?p.a.cur:""},e.name)})))),G?r.a.createElement(A.a,{className:p.a.loading,size:"large"}):r.a.createElement("div",{className:p.a.listContainer},s.length?r.a.createElement(P.a,E,s.map(function(e,a){e.keyWords||(e.keyWords=[]);var t=Math.floor(f/2-16),n=22*Math.ceil(e.keyWords.length/3),c=0;e.frontContent.length>0&&(c=e.frontContent.length<11?18:e.frontContent.length<21?36:54);var o=48+c+24+54+n+92,i=e.imgRate?t*e.imgRate+o:o;return r.a.createElement(S,{key:e.link+a,newestType:k,article:e,style:{width:t,height:i}})})):r.a.createElement(W.a,{status:"404",title:"~\u6ca1\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u5e16\u5b50\u54a9~",subTitle:"Sorry, no matching posts found."}))))}function H(e){return r.a.createElement("div",{className:"home-page"},r.a.createElement(Y,null))}var F=t(39),B=t(32),G=t(135),K=t.n(G),J="token";function q(e){e?w.a.defaults.headers.common.Authorization="Token ".concat(e):delete w.a.defaults.headers.common.Authorization}w.a.defaults.baseURL="https://conduit.productionready.io/api",w.a.interceptors.response.use(function(e){return e},function(e){switch(e.response.status){case 401:Object(u.d)("/register");break;case 404:case 403:Object(u.d)("/")}return Promise.reject(e.response)});var V=w.a;function Q(e){var a,t,n=e.user,r=n.token,c=Object(l.a)(n,["token"]);return a=J,t=r,localStorage.setItem(a,JSON.stringify(t)),q(r),c}function X(e,a){return V.post("/users/login",{user:{email:e,password:a}}).then(function(e){return Q(e.data)})}function Z(){localStorage.removeItem(J),q(null)}var $={isAuthenticated:!1,user:null};function ee(e,a){switch(a.type){case"LOGIN":return Object(B.a)({},e,{isAuthenticated:!0});case"LOAD_USER":return Object(B.a)({},e,{user:a.user});case"LOGOUT":return{isAuthenticated:!1,user:null};default:return e}}var ae=r.a.createContext({state:$,dispatch:function(){return $}});function te(e){var a=r.a.useReducer(ee,$),t=Object(d.a)(a,2),n=t[0],c=t[1];return r.a.useEffect(function(){var e=function(e){var a=localStorage.getItem(e);if(!a)return null;try{return JSON.parse(a)}catch(t){return null}}(J);e&&(!function(e){try{var a=K()(e),t=Date.now().valueOf()/1e3;return a.exp>t}catch(n){return!1}}(e)?(c({type:"LOGOUT"}),Z()):(q(e),c({type:"LOGIN"})))},[]),r.a.createElement(ae.Provider,Object.assign({value:{state:n,dispatch:c}},e))}function ne(){return r.a.useContext(ae)}function re(e){var a=e.errors;return r.a.createElement("ul",{className:"error-messages"},Object.entries(a).map(function(e,a){var t=Object(d.a)(e,2),n=t[0];return t[1].map(function(e){return r.a.createElement("li",{key:a},n," ",e)})}))}function ce(e){var a=r.a.useState({username:"",email:"",password:""}),t=Object(d.a)(a,2),n=t[0],c=t[1],o=r.a.useState(!1),i=Object(d.a)(o,2),l=i[0],f=i[1],p=r.a.useState(null),g=Object(d.a)(p,2),h=g[0],v=g[1],E=ne(),b=E.state.user,N=E.dispatch,w=function(e){c(Object(B.a)({},n,Object(F.a)({},e.currentTarget.name,e.currentTarget.value)))},k=function(){var e=Object(m.a)(s.a.mark(function e(a){var t,r,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),f(!0),t=n.username,r=n.email,c=n.password,e.prev=3,e.next=6,i={username:t,email:r,password:c},V.post("/users",{user:i}).then(function(e){return Q(e.data)});case 6:o=e.sent,N({type:"LOAD_USER",user:o}),Object(u.d)("/"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),f(!1),422===e.t0.status&&v(e.t0.data.errors);case 16:case"end":return e.stop()}var i},e,null,[[3,11]])}));return function(a){return e.apply(this,arguments)}}();return b?r.a.createElement(u.b,{to:"/",noThrow:!0}):r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign up"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(u.a,{to:"/login"},"Have an account?")),h&&r.a.createElement(re,{errors:h}),r.a.createElement("form",{onSubmit:k},r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{name:"username",className:"form-control form-control-lg",type:"text",value:n.username,placeholder:"Your Name",onChange:w})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{name:"email",className:"form-control form-control-lg",type:"email",value:n.email,placeholder:"Email",onChange:w})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{name:"password",className:"form-control form-control-lg",type:"password",value:n.password,placeholder:"Password",onChange:w})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:l},"Sign Up"))))))}function oe(e){var a=r.a.useState(""),t=Object(d.a)(a,2),n=t[0],c=t[1],o=r.a.useState(""),i=Object(d.a)(o,2),l=i[0],f=i[1],p=r.a.useState(!1),g=Object(d.a)(p,2),h=g[0],v=g[1],E=r.a.useState(),b=Object(d.a)(E,2),N=b[0],w=b[1],k=ne(),y=k.state.user,C=k.dispatch,O=function(){var e=Object(m.a)(s.a.mark(function e(a){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),v(!0),e.prev=2,e.next=5,X(n,l);case 5:t=e.sent,C({type:"LOAD_USER",user:t}),Object(u.d)("/"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),v(!1),422===e.t0.status&&w(e.t0.data.errors);case 15:case"end":return e.stop()}},e,null,[[2,10]])}));return function(a){return e.apply(this,arguments)}}();return y?r.a.createElement(u.b,{to:"/",noThrow:!0}):r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign in"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(u.a,{to:"/register"},"Need an account?")),N&&r.a.createElement(re,{errors:N}),r.a.createElement("form",{onSubmit:O},r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{name:"email",className:"form-control form-control-lg",type:"email",value:n,placeholder:"Email",onChange:function(e){return c(e.target.value)}})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{name:"password",className:"form-control form-control-lg",type:"password",value:l,placeholder:"Password",onChange:function(e){return f(e.target.value)}})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:h},"Sign In"))))))}function ie(e){var a=e.profile,t=e.onClick,n=e.loading,c=["btn","btn-sm","action-btn"],o="";return a.following?(c.push("btn-secondary"),o+="Unfollow ".concat(a.username)):(c.push("btn-outline-secondary"),o+="Follow ".concat(a.username)),r.a.createElement("button",{className:c.join(" "),onClick:t,disabled:n},r.a.createElement("i",{className:"ion-plus-round"}),"\xa0",o)}function se(e){return V.post("/profiles/".concat(e,"/follow"))}function le(e){return V.get("/profiles/".concat(e))}function me(e){var a=e.username,t=void 0===a?"":a,n=r.a.useState(null),c=Object(d.a)(n,2),o=c[0],i=c[1],l=r.a.useState(!1),u=Object(d.a)(l,2),f=u[0],p=u[1],h=ne().state.user;r.a.useEffect(function(){var e=!1;function a(){return(a=Object(m.a)(s.a.mark(function a(){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,le(t);case 3:n=a.sent,e||i(n.data.profile),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e=!0}},[t]);var v=function(){var e=Object(m.a)(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:if(p(!0),e.prev=3,!o.following){e.next=10;break}return e.next=7,t=o.username,V.delete("/profiles/".concat(t,"/follow"));case 7:a=e.sent,e.next=13;break;case 10:return e.next=12,se(o.username);case 12:a=e.sent;case 13:i(a.data.profile),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:p(!1);case 20:case"end":return e.stop()}var t},e,null,[[3,16]])}));return function(){return e.apply(this,arguments)}}(),E=o&&h&&o.username===h.username;return o&&r.a.createElement("div",{className:"profile-page"},r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("img",{src:o.image||g,className:"user-img",alt:o.username}),r.a.createElement("h4",null,o.username),r.a.createElement("p",null,o.bio),E?r.a.createElement(ue,null):r.a.createElement(ie,{profile:o,onClick:v,loading:f}))))))}function ue(){return r.a.createElement(u.a,{to:"/settings",className:"btn btn-sm btn-outline-secondary action-btn"},r.a.createElement("i",{className:"ion-gear-a"})," Edit Profile Settings")}function de(e){var a=ne(),t=a.state.user,n=a.dispatch,c=r.a.useState(!1),o=Object(d.a)(c,2),i=o[0],l=o[1],f=r.a.useState(null),p=Object(d.a)(f,2),g=p[0],h=p[1],v=r.a.useState({username:"",email:"",image:"",bio:"",password:""}),E=Object(d.a)(v,2),b=E[0],N=E[1];r.a.useEffect(function(){if(t){var e=t.username,a=t.email,n=t.image,r=t.bio;console.log(e,a,n,r),N({username:e,email:a,image:n||"",bio:r||"",password:""})}},[t]);var w=function(e){N(Object(B.a)({},b,Object(F.a)({},e.currentTarget.name,e.currentTarget.value)))},k=function(){var e=Object(m.a)(s.a.mark(function e(a){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),l(!0),b.password||delete b.password,e.prev=3,e.next=6,r=b,V.put("/user",{user:r});case 6:t=e.sent,n({type:"LOAD_USER",user:t.data.user}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),422===e.t0.status&&h(e.t0.data.errors);case 14:l(!1);case 15:case"end":return e.stop()}var r},e,null,[[3,10]])}));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"settings-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Your Settings"),g&&r.a.createElement(re,{errors:g}),r.a.createElement("form",{onSubmit:k},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"image",className:"form-control",type:"text",placeholder:"URL of profile picture",value:b.image,onChange:w})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"username",className:"form-control form-control-lg",type:"text",placeholder:"Username",value:b.username,onChange:w})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{name:"bio",className:"form-control form-control-lg",rows:8,placeholder:"Short bio about you",value:b.bio,onChange:w})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"email",className:"form-control form-control-lg",type:"email",placeholder:"Email",value:b.email,onChange:w})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"password",className:"form-control form-control-lg",type:"password",placeholder:"New Password",value:b.password,onChange:w})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:i},"Update Settings"))),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){n({type:"LOGOUT"}),Z(),Object(u.d)("/")}},"Or click here to logout.")))))}function fe(e){var a=e.as,t=Object(l.a)(e,["as"]);return ne().state.user?r.a.createElement(a,t):r.a.createElement(H,null)}function pe(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.c,null,r.a.createElement(H,{default:!0}),r.a.createElement(H,{path:"/douban/home"}),r.a.createElement(ce,{path:"/douban/register"}),r.a.createElement(oe,{path:"login"}),r.a.createElement(me,{path:":username"}),r.a.createElement(fe,{as:de,path:"/settings"})))}function ge(){var e=ne(),a=e.state,t=a.user,n=a.isAuthenticated,c=e.dispatch;return r.a.useEffect(function(){var e=!1;function a(){return(a=Object(m.a)(s.a.mark(function a(){var t,n,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.get("/user");case 3:t=a.sent,n=t.data.user,n.token,r=Object(l.a)(n,["token"]),e||c({type:"LOAD_USER",user:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])}))).apply(this,arguments)}return!t&&n&&function(){a.apply(this,arguments)}(),function(){e=!0}},[c,n,t]),!t&&n?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,null))}t(268);var he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){return r.a.createElement(te,null,r.a.createElement(ge,null))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat(".","/cus-service-worker.js");he?(function(e,a){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ve(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ve(a,e)})}}()},4:function(e,a,t){e.exports={listItem:"ListItem_listItem__2Kpsv",noImg:"ListItem_noImg__NLfhW",dataContainer:"ListItem_dataContainer__kZO2k",tag:"ListItem_tag__3NL6f",textContainer:"ListItem_textContainer__2Ewqv",imgContainer:"ListItem_imgContainer__3f48Y",authorPic:"ListItem_authorPic__3tsWT",title:"ListItem_title__2C4C0",frontContent:"ListItem_frontContent__19ceW",author:"ListItem_author__3LTIe",dataItem:"ListItem_dataItem__2x53R"}},7:function(e,a,t){e.exports={listContainer:"List_listContainer__7Vk_n",htmlContainer:"List_htmlContainer__1nwVq",searchContainer:"List_searchContainer__1Tzoa",cur:"List_cur__2IY9y",searchTop:"List_searchTop__2U5OW",left:"List_left__2_NIi",right:"List_right__3QW3j",switchSpan:"List_switchSpan__3Kr_0",loading:"List_loading__1O0S7",backTop:"List_backTop__1FB8s",feedBack:"List_feedBack__2mSXk"}}},[[137,1,2]]]);
//# sourceMappingURL=main.50bc3556.chunk.js.map